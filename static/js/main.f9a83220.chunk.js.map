{"version":3,"sources":["Map.js","Grid.js","Graph.js","Drawer.js","App.js","Home.js","serviceWorker.js","index.js"],"names":["geojsonLayer","map","style","width","height","MapData","props","state","data","toposkaermkortwmts","L","tileLayer","wms","layers","token","format","attribution","center","zoom","legend","control","position","onAdd","div","DomUtil","create","innerHTML","addTo","scale","undefined","removeLayer","geoJSON","onEachFeature","feature","layer","bindPopup","properties","status","navn","pointToLayer","latlng","marker","icon","iconUrl","selector","shadowUrl","iconAnchor","shadowAnchor","popupAnchor","centerCoords","features","filter","includes","length","geometry","coordinates","getCenterPoint","setView","fitBounds","getBounds","this","renderMap","renderFeatures","console","log","id","React","Component","StatusFormatter","value","color","StatusTypeProvider","formatterComponent","PnummerFormatter","link","href","target","rel","PnummerProvider","getRowId","row","GridData","rows","sorting","columnName","direction","statusColumns","pcols","grouping","changeSorting","setState","changeGrouping","updateData","pc","index","s","replace","Paper","columns","name","title","defaultFilters","defaultSorting","for","defaultColumnWidths","showSortingControls","filteredRows","PureComponent","GraphData","clicked","fill","catData","dat","tilfl","x","y","getSummaryData","theme","VictoryTheme","material","domainPadding","barWidth","dataComponent","events","onMouseOver","fillColor","d","datum","labels","useStyles","makeStyles","list","fullList","nested","paddingLeft","TemporaryDrawer","classes","handleDrawer","filterCols","handleCheckedFilters","reset","doFilter","filterWords","useState","postdistrikt","postnummer","opened","setOpened","Drawer","anchor","open","drawerOpen","onClose","categories","cols","comps","forEach","categorie","key","col","ListItem","button","className","ListItemText","primary","Object","keys","ListItemSecondaryAction","Checkbox","checked","values","onChange","e","edge","_list","role","List","ListItemIcon","Button","variant","size","onClick","dense","text","Fragment","handleClick","Collapse","in","timeout","unmountOnExit","component","disablePadding","sideList","moment","locale","ExcelFile","ReactExport","ExcelSheet","ExcelColumn","createMuiTheme","typography","useNextVariants","suppressDeprecationWarnings","uniqueValuesGroupedByKey","arrOfObj","ret","uniqueElemsOfSameKey","_arrOfObj","colValues","elem","Set","TabContainer","children","App","startDate","subtract","startOf","endDate","endOf","kommuner","komkode","komnr","csvData","loading","completed","canSendRequest","filterOpen","uniqueVals","dataToRender","handleChange","bind","handleStart","handleEnd","handleSelect","handleDoneClick","handleFilterOpen","handleFilterClose","handleDrawerOpen","updateRenderDataFromTable","filteredCategories","filters","cat","temp","obj","res","indexOf","event","split","group","checkedGroup","indexToUpdate","findIndex","elementToUpdate","slice","that","jQuery","ajax","url","type","dataType","success","koms","preveState","dataUrl","csv","form","virksomhedsform","getVirkForm","prevState","persist","getData","getKommuner","navigate","date","MuiThemeProvider","AppBar","Toolbar","Grid","container","item","xs","Typography","classnames","noValidate","autoComplete","TextField","select","label","placeholder","textField","SelectProps","native","helperText","InputLabelProps","shrink","kom","komnavn","utils","MomentUtils","DatePicker","IconButton","arial-label","element","filename","Tabs","centered","Tab","Tooltip","aria-label","Graph","withStyles","root","flexGrow","display","flexWrap","marginLeft","spacing","marginRight","marginTop","menu","progress","margin","source","createHashSource","history","createHistory","Home","path","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"uVASIA,EACAC,E,iaANEC,EAAQ,CACZC,MAAO,OACPC,OAAQ,SA+MKC,E,YAxMb,WAAYC,GAAQ,IAAD,8BACjB,4CAAMA,KACDC,MAAQ,CACXC,KAAM,IAHS,E,yEAQjB,IAGIC,EAAqBC,IAAEC,UAAUC,IACnC,sDACA,CACEC,OAAQ,yBACRC,MALU,mCAMVC,OAAQ,YACRC,YARF,+JAWFf,EAAMS,IAAET,IAAI,MAAO,CACjBgB,OAAQ,CAAC,KAAM,MACfC,KAAM,EACNL,OAAQ,CAYNJ,KAIJ,IAAIU,EAAST,IAAEU,QAAQ,CAAEC,SAAU,eACnCF,EAAOG,MAAQ,SAASrB,GACtB,IAAIsB,EAAMb,IAAEc,QAAQC,OAAO,MAAO,UAUlC,OATAF,EAAIG,WAAa,8BACjBH,EAAIG,WACF,+DACFH,EAAIG,WACF,gEACFH,EAAIG,WACF,gEACFH,EAAIG,WACF,+DACKH,GAETJ,EAAOQ,MAAM1B,GAEbS,IAAEU,QAAQQ,QAAQD,MAAM1B,K,qCAEXO,QA0BQqB,IAAjB7B,GACFC,EAAI6B,YAAY9B,GAsBlBA,EAAeU,IAAEqB,QAAQvB,EAAM,CAC7BwB,cAbF,SAAuBC,EAASC,GAC9BA,EAAMC,UACJ,WACEF,EAAQG,WAAWC,OACnB,qBACAJ,EAAQG,WAAWE,KACnB,sFACAL,EAAQG,WAAW,YACnB,sCAMJG,aAAc,SAASN,EAASO,GAE9B,OAAO9B,IAAE+B,OAAOD,EAAQ,CACtBE,MApDoBL,EAoDHJ,EAAQG,WAAWC,OArCjC3B,IAAEgC,KAAK,CACZC,QAfF,SAAkBN,GAChB,OAAQA,GACN,IAAK,aACH,MAAO,YACT,IAAK,aACH,MAAO,YACT,IAAK,YACH,MAAO,YACT,IAAK,YACH,MAAO,aAMFO,CAASP,GAClBQ,UAAW,iBACXC,WAAY,CAAC,GAAI,IACjBC,aAAc,CAAC,GAAI,IACnBC,YAAa,CAAC,GAAI,SApBL,IAASX,KAuDvBV,MAAM1B,GAET,IAAIgD,EA7BJ,SAAwBzC,GACtB,IAAI0C,EAAW1C,EAAK2C,QAAO,SAAAlB,GAAO,MAChC,CAAC,YAAa,IAAImB,SAASnB,EAAQG,WAAWC,WAEhD,OAAwB,IAApBa,EAASG,OAAqB,KAC3BH,EAAS,GAAGI,SAASC,YAwBXC,CAAehD,GAC9ByC,EAAchD,EAAIwD,QAAQ,CAACR,EAAa,GAAIA,EAAa,IAAK,IAC7DhD,EAAIyD,UAAU1D,EAAa2D,e,0CAGhCC,KAAKC,YACDD,KAAKtD,MAAME,KAAK6C,OAAS,GAC3BO,KAAKE,eAAeF,KAAKtD,MAAME,Q,2CAKjCuD,QAAQC,IAAI,sBAGRJ,KAAKtD,MAAME,KAAK6C,OAAS,EAC3BO,KAAKE,eAAeF,KAAKtD,MAAME,MAE/BuD,QAAQC,IAAI,iB,oCAIFxD,QA2BSqB,IAAjB7B,GACFC,EAAI6B,YAAY9B,GAgBlBA,EAAeU,IAAEqB,QAAQvB,EAAM,CAC7BwB,cAdF,SAAuBC,EAASC,GAE9BA,EAAMC,UACJ,WACEF,EAAQG,WAAWC,OACnB,qBACAJ,EAAQG,WAAWE,KACnB,sFACAL,EAAQG,WAAW,YACnB,sCAMJG,aAAc,SAASN,EAASO,GAC9B,OAAO9B,IAAE+B,OAAOD,EAAQ,CACtBE,MA7CoBL,EA6CHJ,EAAQG,WAAWC,OA9BjC3B,IAAEgC,KAAK,CACZC,QAfF,SAAkBN,GAChB,OAAQA,GACN,IAAK,aACH,MAAO,YACT,IAAK,aACH,MAAO,YACT,IAAK,YACH,MAAO,YACT,IAAK,YACH,MAAO,aAMFO,CAASP,GAClBQ,UAAW,iBACXC,WAAY,CAAC,GAAI,IACjBC,aAAc,CAAC,GAAI,IACnBC,YAAa,CAAC,GAAI,SApBL,IAASX,KAgDvBV,MAAM1B,K,+BAOT,OAAO,yBAAKgE,GAAG,MAAM/D,MAAOA,Q,GArMVgE,IAAMC,W,oCCoBtBC,GAAkB,SAAC,GAAe,IARvB/B,EAQUgC,EAAY,EAAZA,MACrBC,EARW,gBADAjC,EASMgC,GARe,SAChB,eAAXhC,EAAgC,QACrB,cAAXA,EAA+B,OACpB,cAAXA,EAA4B,MACzB,OAKZ,OAAO,uBAAGnC,MAAO,CAAEoE,MAAOA,IAAUD,IAGhCE,GAAqB,SAAAjE,GAAK,OAC9B,kBAAC,KAAD,eAAkBkE,mBAAoBJ,IAAqB9D,KAGvDmE,GAAmB,SAAC,GAAe,IAAbJ,EAAY,EAAZA,MACtBK,EAAI,+EAA2EL,GACnF,OACE,uBAAGM,KAAMD,EAAME,OAAO,SAASC,IAAI,uBAChCR,IAKDS,GAAkB,SAAAxE,GAAK,OAC3B,kBAAC,KAAD,eAAkBkE,mBAAoBC,IAAsBnE,KAIxDyE,GAAW,SAAAC,GACf,OAAOA,EAAG,UA0LGC,G,YAxIb,WAAY3E,GAAQ,IAAD,8BACjB,4CAAMA,KACDC,MAAQ,CACX2E,KAAM,GACN1E,KAAM,GACN2E,QAAS,CAAC,CAAEC,WAAY,eAAgBC,UAAW,SACnDC,cAAe,CAAC,UAChBC,MAAO,CAAC,YACRC,SAAU,CAAC,CAAEJ,WAAY,YAE3B,EAAKK,cAAgB,SAAAN,GAAO,OAAI,EAAKO,SAAS,CAAEP,aAChD,EAAKQ,eAAiB,SAAAH,GAAQ,OAAI,EAAKE,SAAS,CAAEF,cAXjC,E,iKAmBjB,IAAMI,EAAahC,KAAKtD,MAAMsF,WAqCtBN,EAAkB1B,KAAKrD,MAAvB+E,cACFO,EAAKjC,KAAKrD,MAAMgF,MAChBL,EAAOtB,KAAKtD,MAAME,KAAKP,KAAI,SAACgC,EAAS6D,GACzC7D,EAAQG,WAAR,SAAiC0D,EACjC,IAAIC,EAAI9D,EAAQG,WAAW,8BAc3B,OAbS,OAAN2D,GAAcA,EAAE1C,OAAS,IAC1BpB,EAAQG,WAAW,8BAAgC2D,EAAEC,QAAQ,MAAM,KAC5D,SAAND,IACD9D,EAAQG,WAAW,8BAAgC,IAU9CH,EAAQG,cAIjB,OACE,kBAAC6D,EAAA,EAAD,CACE/F,MAAO,CACLE,OAAQ,UAGV,kBAAC,KAAD,CACE8E,KAAMA,EACNgB,QAlEO,CACX,CAAEC,KAAM,SAAUC,MAAO,UACzB,CAAED,KAAM,aAAcC,MAAO,cAC7B,CAAED,KAAM,WAAYC,MAAO,YAC3B,CAAED,KAAM,eAAgBC,MAAO,WAC/B,CAAED,KAAM,kBAAmBC,MAAO,mBAClC,CAAED,KAAM,OAAQC,MAAO,mBACvB,CAAED,KAAM,6BAA8BC,MAAO,iBAC7C,CAAED,KAAM,sBAAuBC,MAAO,iBACtC,CAAED,KAAM,cAAeC,MAAO,eAC9B,CAAED,KAAM,UAAWC,MAAO,WAC1B,CAAED,KAAM,YAAaC,MAAO,aAC5B,CAAED,KAAM,aAAcC,MAAO,cAC7B,CAAED,KAAM,eAAgBC,MAAO,MAC/B,CAAED,KAAM,eAAgBC,MAAO,SAC/B,CAAED,KAAM,kBAAgBC,MAAO,oBAoD3BrB,SAAUA,GACV7E,MAAO,CACLE,OAAQ,SAGV,kBAAC,KAAD,CAAgBiG,eAAgB,KAChC,kBAAC,KAAD,MACA,kBAAC,KAAD,CACEC,eAAgB,CAAC,CAAElB,WAAY,SAAUC,UAAW,WAEtD,kBAAC,KAAD,MACA,kBAAC,GAAD,CAAoBkB,IAAKjB,IACzB,kBAAC,GAAD,CAAiBiB,IAAKV,IACtB,kBAAC,KAAD,CAAczF,OAAQ,MACtB,kBAAC,KAAD,CAAqBoG,oBA/DC,CAC1B,CAAEpB,WAAY,SAAUjF,MAAO,KAC/B,CAAEiF,WAAY,aAAcjF,MAAO,KACnC,CAAEiF,WAAY,WAAYjF,MAAO,KACjC,CAAEiF,WAAY,eAAgBjF,MAAO,KACrC,CAAEiF,WAAY,kBAAmBjF,MAAO,KACxC,CAAEiF,WAAY,OAAQjF,MAAO,KAC7B,CAAEiF,WAAY,6BAA8BjF,MAAO,KACnD,CAAEiF,WAAY,sBAAuBjF,MAAO,KAC5C,CAAEiF,WAAY,cAAejF,MAAO,KACpC,CAAEiF,WAAY,UAAWjF,MAAO,KAChC,CAAEiF,WAAY,YAAajF,MAAO,KAClC,CAAEiF,WAAY,aAAcjF,MAAO,KACnC,CAAEiF,WAAY,eAAgBjF,MAAO,KACrC,CAAEiF,WAAY,eAAgBjF,MAAO,KACrC,CAAEiF,WAAY,kBAAgBjF,MAAO,QAiDjC,kBAAC,KAAD,CAAgBsG,qBAAmB,IACnC,kBAAC,KAAD,MACA,kBAAC,KAAD,CAAUN,KAAK,QACb,kBAAC,KAAD,MACG,YAA6B,IAApBO,EAAmB,EAAzBxB,KAIF,OAHAnB,QAAQC,IAAI,gBACZD,QAAQC,IAAI0C,GACZd,EAAWc,GACJ,kBAAC,KAAD,gB,GA/GAxC,IAAMyC,e,wCCoBdC,G,YA7Db,aAAe,IAAD,8BACZ,+CACKrG,MAAQ,CACXsG,SAAS,EACT3G,MAAO,CACLM,KAAM,CAAEsG,KAAM,YALN,E,sEAUJ,IAAD,OAYHC,EAlFe,SAAAC,GACrB,IAAIxG,EAAOwG,EAAI/G,KAAI,SAAAgC,GAAO,OAAIA,EAAQG,cAClC6E,EAAQzG,EAAK2C,QAAO,SAAA+D,GACtB,MAAoB,eAAbA,EAAE7E,UACRgB,OAIH,MAAO,CACL,CAAE6D,EAAG,aAAcC,EAJT3G,EAAK2C,QAAO,SAAA+D,GAAC,MAAiB,eAAbA,EAAE7E,UAAyBgB,QAKtD,CAAE6D,EAAG,aAAcC,EAAGF,GACtB,CAAEC,EAAG,YAAUC,EALP3G,EAAK2C,QAAO,SAAA+D,GAAC,MAAiB,cAAbA,EAAE7E,UAAqBgB,QAMhD,CAAE6D,EAAG,YAAaC,EALX3G,EAAK2C,QAAO,SAAA+D,GAAC,MAAiB,cAAbA,EAAE7E,UAAwBgB,SA2EpC+D,CAAexD,KAAKtD,MAAME,MAGxC,OACE,6BACE,kBAACyF,EAAA,EAAD,CAAO/F,MAAO,CAAEE,OAAQ,SACtB,kBAAC,KAAD,CACEA,OAAQ,IACRD,MAAO,IAEPkH,MAAOC,KAAaC,SACpBC,cAAe,GAGf,kBAAC,KAAD,CAEEC,SAAU,EACVC,cAAe,kBAAC,KAAD,CAAKC,OAAQ,CAAEC,YA5BhB,WACtB,IAAMC,EAAY,EAAKtH,MAAMsG,QAAU,OAAS,SAC1CA,GAAW,EAAKtG,MAAMsG,QAC5B,EAAKnB,SAAS,CACZmB,UACA3G,MAAO,CACLM,KAAM,CAAEsG,KAAMe,UAuBV3H,MAAO,CACLM,KAAM,CACJsG,KAAM,SAAAgB,GAEJ,MAAkB,eAAdA,EAAEC,MAAMb,EAA2B,SACrB,eAAdY,EAAEC,MAAMb,EAA2B,QACrB,cAAdY,EAAEC,MAAMb,EAAuB,MACjB,cAAdY,EAAEC,MAAMb,EAA0B,YAAtC,KAIN1G,KAAMuG,EACNiB,OAAQ,SAAAF,GAAC,OAAIA,EAAEC,MAAMZ,Y,GArDXjD,IAAMC,W,0OCjDxB8D,GAAYC,aAAW,CAC3BC,KAAM,CACJhI,MAAO,KAETiI,SAAU,CACRjI,MAAO,QAETkI,OAAQ,CACNC,YAAa,MAIF,SAASC,GAAgBjI,GACtC,IAAMkI,EAAUP,KAEVQ,EAAenI,EAAMmI,aACrBC,EAAapI,EAAMoI,WACnBC,EAAuBrI,EAAMqI,qBAC7BC,EAAQtI,EAAMsI,MACdC,EAAWvI,EAAMuI,SACjBC,EAAcxI,EAAMwI,YARmB,EAUjB5E,IAAM6E,SAAS,CACzC1G,QAAQ,EACR2G,cAAc,EACdC,YAAY,IAb+B,mBAUtCC,EAVsC,KAU9BC,EAV8B,KAkF7C,OACE,6BAEE,kBAACC,GAAA,EAAD,CAAQC,OAAO,QAAQC,KAAMhJ,EAAMiJ,WAAYC,QAASf,GA9C3C,SAACgB,EAAYC,GAC5B,IAAIC,EAAQ,GAOZ,OANAF,EAAWG,SAAQ,SAAAC,GACbH,EAAKG,KACPF,EAAME,GAlBE,SAACH,EAAKI,GAClB,OAAOJ,EAAKI,GAAK7J,KAAI,SAAC8J,EAAKjE,GAAN,OACnB,kBAACkE,GAAA,EAAD,CAAUF,IAAKA,EAAM,IAAMhE,EAAOmE,QAAM,EAACC,UAAW1B,EAAQH,QAC1D,kBAAC8B,GAAA,EAAD,CAAcC,QAASC,OAAOC,KAAKP,GAAK,KACxC,kBAACQ,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CACEC,QAASJ,OAAOK,OAAOX,GAAK,GAC5BY,SAAU,SAACC,GAAD,OAAOjC,EAAqBmB,EAAM,IAAMO,OAAOC,KAAKP,GAAK,GAAIa,IACvEC,KAAK,aAUUC,CAAMpB,EAAKG,OAKhC,yBAAKK,UAAW1B,EAAQL,KAAM4C,KAAK,gBACjC,kBAACC,GAAA,EAAD,KACA,kBAAChB,GAAA,EAAD,KACI,kBAACiB,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAQC,QAAQ,YAAY7G,MAAM,UAAU8G,KAAK,QAAQC,QAASxC,GAAlE,aAIF,kBAAC0B,GAAA,EAAD,KACE,kBAACW,GAAA,EAAD,CAAQC,QAAQ,YAAY7G,MAAM,YAAY8G,KAAK,QAAQC,QAASzC,GAApE,YAMN,kBAACoC,GAAA,EAAD,CAAMM,OAAK,GACR7B,EAAWxJ,KAAI,SAACsL,EAAMzF,GAAP,OACd,kBAAC,IAAM0F,SAAP,CAAgB1B,IAAK,OAAOhE,GAC1B,kBAACkE,GAAA,EAAD,CAAUC,QAAM,EAACH,IAAKyB,EAAMF,QAAS,kBAjD7B,SAAAE,GAClBpC,EAAU,eACLD,EADI,eAENqC,GAAQrC,EAAOqC,MA8CmCE,CAAYF,KACrD,kBAACpB,GAAA,EAAD,CAAcC,QAASmB,IACtBrC,EAAOqC,GAAQ,kBAAC,KAAD,MAAiB,kBAAC,KAAD,OAEnC,kBAACG,GAAA,EAAD,CAAUC,GAAIzC,EAAOqC,GAAOK,QAAQ,OAAOC,eAAa,GACtD,kBAACb,GAAA,EAAD,CAAMc,UAAU,MAAMC,gBAAc,EAACT,OAAK,GACvC3B,EAAM4B,WAchBS,CAASlD,EAAaJ,KC3E/BuD,IAAOC,OAAO,MAYd,IAAMC,GAAYC,KAAYD,UACxBE,GAAaD,KAAYD,UAAUE,WACnCC,GAAcF,KAAYD,UAAUG,YACpCxD,GAAc,CAAC,SAAU,kBAAmB,gBA6B5CzB,GAAQkF,YAAe,CAC3BC,WAAY,CACVC,iBAAiB,EACjBC,6BAA6B,KAyDjC,SAASC,GAAyBC,EAAUtC,GAG1C,IAAIuC,EAAM,GAEV,SAASC,EAAqBC,EAAWjD,GACvC,IA1DkBkD,EA0DZtC,EAASqC,EAAU9M,KAAI,SAAAgN,GAAI,OAAIA,EAAKnD,MACtC+C,GA3DcG,EA2DMtC,EA1DlB,YAAO,IAAIwC,IAAIF,KA4DrB,OADAH,EAAMA,EAAI5M,KAAI,SAAAgN,GAAI,sBAAOA,GAAO,MAQlC,OAJA3C,EAAKV,SAAQ,SAAAE,GACX+C,EAAI/C,GAAOgD,EAAqBF,EAAU9C,MAGrC+C,EAGT,SAASM,GAAa7M,GACpB,OAAO,6BAAMA,EAAM8M,U,IAOfC,G,YACJ,WAAY/M,GAAQ,IAAD,8BACjB,4CAAMA,KACDC,MAAQ,CACX8D,MAAO,EACPiJ,UAAWrB,MACRsB,SAAS,EAAG,UACZC,QAAQ,SACRzM,OAAO,cACV0M,QAASxB,MACNsB,SAAS,EAAG,UACZG,MAAM,SACN3M,OAAO,cACVP,KAAM,GACNmN,SAAU,GACVC,QAAS,EAAKtN,MAAMuN,MAEpBC,QAAS,GACTC,SAAS,EACTC,UAAW,EACXC,gBAAgB,EAChBC,YAAY,EACZ3E,YAAY,EAEZ4E,WAAY,GAOZC,aAAc,IAGhB,EAAKC,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,YAAc,EAAKA,YAAYD,KAAjB,gBACnB,EAAKE,UAAY,EAAKA,UAAUF,KAAf,gBACjB,EAAKG,aAAe,EAAKA,aAAaH,KAAlB,gBACpB,EAAKI,gBAAkB,EAAKA,gBAAgBJ,KAArB,gBACvB,EAAKK,iBAAmB,EAAKA,iBAAiBL,KAAtB,gBACxB,EAAKM,kBAAoB,EAAKA,kBAAkBN,KAAvB,gBACzB,EAAKO,iBAAmB,EAAKA,iBAAiBP,KAAtB,gBACxB,EAAK3F,qBAAuB,EAAKA,qBAAqB2F,KAA1B,gBAC5B,EAAK1F,MAAQ,EAAKA,MAAM0F,KAAX,gBACb,EAAKQ,0BAA4B,EAAKA,0BAA0BR,KAA/B,gBACjC,EAAKzF,SAAW,EAAKA,SAASyF,KAAd,gBA5CC,E,wEAgDjB,IAAMH,EAAavK,KAAKrD,MAAM4N,WACxBY,EAAqB1E,OAAOC,KAAK6D,GAEnCa,EAAU,GACbD,EAAmBnF,SAAQ,SAAAqF,GAC1B,IAAIC,EAAOf,EAAWc,GAEtBD,EAAQC,GAAOC,EAAK/L,QAAO,SAAAgM,GACzB,OAAiC,IAA1B9E,OAAOK,OAAOyE,GAAK,MAE5BlP,KAAI,SAAAgN,GACF,OAAO5C,OAAOC,KAAK2C,GAAM,SAG5B,IACMzM,EADeoD,KAAKrD,MAAM6N,aACNjL,QAAO,SAAA6B,GAChC,IAAIoK,GAAM,EAOV,OANAL,EAAmBnF,SAAQ,SAAAE,GAExBkF,EAAQlF,GAAKzG,OAAS,IAC2B,IAA/C2L,EAAQlF,GAAKuF,QAAQrK,EAAI5C,WAAW0H,MAClCsF,GAAM,MAENA,KAERxL,KAAK8B,SAAS,CAAC0I,aAAe5N,M,gDAIPkG,GACxB3C,QAAQC,IAAI,iBACZJ,KAAK8B,SAAS,CAACoI,QAASpH,M,8BAIxB9C,KAAK8B,SAAS,CACZ0I,aAAcxK,KAAKrD,MAAMC,KACzB2N,WAAYxB,GACV/I,KAAKrD,MAAMC,KAAKP,KAAI,SAAAgC,GAAO,OAAIA,EAAQG,cACvC0G,Q,2CAKeyC,EAAM+D,GAAM,MACX/D,EAAKgE,MAAM,KADA,mBAC1BC,EAD0B,KACnBrJ,EADmB,KAE3BsJ,EAAe7L,KAAKrD,MAAM4N,WAAWqB,GACrCE,EAAgBD,EAAaE,WAAU,SAAA1C,GAAI,OAAI5C,OAAOC,KAAK2C,GAAM,KAAO9G,KACxEyJ,EAAkBH,EAAaC,GAEnCE,EAAgBzJ,IAASyJ,EAAgBzJ,GAEzCvC,KAAK8B,SAAS,CAACyI,WAAW,eACrBvK,KAAKrD,MAAM4N,WADS,eAEtBqB,EAFsB,sBAGlBC,EAAaI,MAAM,EAAEH,IAHH,CAIrBE,GAJqB,YAKlBH,EAAaI,MAAMH,EAAc,W,yCAMxC9L,KAAK8B,SAAS,CAAEwI,YAAatK,KAAKrD,MAAM2N,e,yCAIxCtK,KAAK8B,SAAS,CAAE6D,YAAa3F,KAAKrD,MAAMgJ,e,0CAIxC3F,KAAK8B,SAAS,CAAEwI,YAAY,M,oCAQ5B,IAAI4B,EAAOlM,KACXmM,KAAOC,KAAK,CACVC,IAHO,WAIPC,KAAM,MACNC,SAAU,OACVC,QAAS,SAAShB,GAChB,IAAIiB,EAAOjB,EAAIlM,SAASjD,KAAI,SAAAgC,GAAO,OAAIA,EAAQG,cAC/C0N,EAAKpK,UAAS,SAAA4K,GAAU,MAAK,CAAE3C,SAAU0C,W,8BAKvCzC,EAASN,EAAWG,GAC1B7J,KAAK8B,UAAS,SAAA4K,GAAU,MAAK,CAAExC,QAAS,GAAIC,SAAS,MACrD,IAAI+B,EAAOlM,KACX,GAAKgK,EAAL,CAIA,IAAI2C,EACF,sFACA3C,EACA,KAAMN,EAAW,MAAOG,EAAS,cAGnCsC,KAAOC,KAAK,CACVC,IAAKM,EACLL,KAAM,MACNC,SAAU,QACVC,QAAS,SAAShB,GAGhB,IAAIoB,EAAMpB,EAAIlM,SAASjD,KAAI,SAAAgC,GAAO,OAAIA,EAAQG,cAC9CgN,EAAIlM,SAAS0G,SAAQ,SAAA3H,GACnB,IAAIwO,EAAOxO,EAAQG,WAAWsO,gBAC9BzO,EAAQG,WAAWsO,gBA5OT,SAAAD,GAClB,OAAOA,GACL,KAAK,GAAK,MAAO,wBACjB,KAAK,GAAK,MAAO,oCACjB,KAAK,GAAK,MAAO,YACjB,KAAK,GAAK,MAAO,kBACjB,KAAK,GAAK,MAAO,mBACjB,KAAK,GAAK,MAAO,iCACjB,KAAK,GAAK,MAAO,aACjB,KAAK,GAAK,MAAO,eACjB,KAAK,GAAK,MAAO,oCACjB,KAAK,GAAK,MAAO,iBACjB,KAAK,GAAK,MAAO,2BACjB,KAAK,GAAK,MAAO,OACjB,KAAK,IAAM,MAAO,wBAClB,KAAK,IAAM,MAAO,WAClB,KAAK,IAAM,MAAO,qBAClB,KAAK,IAAM,MAAO,0BAClB,KAAK,IAAM,MAAO,kDAClB,KAAK,IAAM,MAAO,iDAClB,KAAK,IAAM,MAAO,kCAClB,KAAK,IAAM,MAAO,mCAClB,KAAK,IAAM,MAAO,wCAClB,KAAK,IAAM,MAAO,qDAClB,KAAK,IAAM,MAAO,mDAClB,KAAK,IAAM,MAAO,wDAClB,KAAK,IAAM,MAAO,cAClB,KAAK,IAAM,MAAO,wBAClB,KAAK,IAAM,MAAO,wCAClB,KAAK,IAAM,MAAO,8BAClB,KAAK,IAAM,MAAO,2DAClB,KAAK,IACL,KAAK,IACL,KAAK,IACL,KAAK,IAAM,MAAO,0BAClB,KAAK,IAAM,MAAO,+BAClB,KAAK,IAAM,MAAO,qDAClB,KAAK,IAAM,MAAO,8BAClB,KAAK,IAAM,MAAO,sCAClB,KAAK,IAAM,MAAO,aAClB,KAAK,IAAM,MAAO,uBAClB,KAAK,IAAM,MAAO,0BAClB,QAAU,OAAOA,GAkM0BE,CAAYF,MAEnDX,EAAKpK,UAAS,SAAAkL,GAAS,MAAK,CAC1B9C,QAAS0C,EACThQ,KAAM4O,EAAIlM,SACVkL,aAAcgB,EAAIlM,SAClB6K,SAAS,EACTI,WAAYxB,GAAyB6D,EAAI1H,gBA1B7ClF,KAAK8B,SAAS,CAAEqI,SAAS,M,mCAgChBuB,GACXA,EAAMuB,UACNjN,KAAK8B,UAAS,SAAAkL,GAAS,MAAK,CAAEhD,QAAS0B,EAAM1K,OAAOP,Y,0CAGjC,IAAD,EACoBT,KAAKrD,MAArCqN,EADY,EACZA,QAASN,EADG,EACHA,UAAWG,EADR,EACQA,QAC1B7J,KAAKkN,QAAQlD,EAASN,EAAWG,GACjC7J,KAAKmN,gB,mFAOMzB,EAAOjL,GAClBT,KAAK8B,SAAS,CAAErB,Y,wCAGC,IAAD,EACsBT,KAAKrD,MAArCqN,EADU,EACVA,QAASN,EADC,EACDA,UAAWG,EADV,EACUA,QAC1B7J,KAAKkN,QAAQlD,EAASN,EAAWG,GACjCuD,YAAS,KAAOpD,K,kCAGNqD,GACVrN,KAAK8B,SAAS,CACZ4H,UAAW2D,EAAKlQ,OAAO,kB,gCAIjBkQ,GACRrN,KAAK8B,SAAS,CACZ+H,QAASwD,EAAKlQ,OAAO,kB,+BAIf,IAAD,SACkD6C,KAAKrD,MAAtD8D,EADD,EACCA,MAAOiJ,EADR,EACQA,UAAWG,EADnB,EACmBA,QAASE,EAD5B,EAC4BA,SAAUC,EADtC,EACsCA,QAE7C,OACE,kBAACsD,EAAA,EAAD,CAAkB7J,MAAOA,IACvB,yBAAK6C,UAAU,OACb,yBAAKA,UAAWtG,KAAKrD,MAAMwN,QAAU,UAAY,KAEjD,kBAACxF,GAAD,CACEE,aAAc7E,KAAKiL,iBACnBtF,WAAY3F,KAAKrD,MAAMgJ,WACvBb,WAAY9E,KAAKrD,MAAM4N,WACvBxF,qBAAsB/E,KAAK+E,qBAC3BC,MAAOhF,KAAKgF,MACZC,SAAUjF,KAAKiF,SACfC,YAAaA,KAEf,yBAAKoB,UAAU,IACb,kBAACiH,EAAA,EAAD,CAAQ9P,SAAS,SAASiD,MAAM,WAC9B,kBAAC8M,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAMC,WAAS,GACb,kBAACD,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GACb,kBAACC,EAAA,EAAD,CAAYtG,QAAQ,KAAK7G,MAAM,WAA/B,yBAIF,kBAAC+M,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GACb,0BACEtH,UAAWwH,KAAWJ,UACtBK,YAAU,EACVC,aAAa,OAEb,kBAACC,EAAA,EAAD,CACE5N,GAAG,kBACH6N,QAAM,EACNC,MAAM,UACNC,YAAY,cACZ9H,UAAWwH,KAAWO,UACtB5N,MAAOT,KAAKrD,MAAMqN,SAAW,GAC7BjD,SAAU/G,KAAK6K,aACfyD,YAAa,CACXC,QAAQ,GAEVC,WAAW,GACXC,gBAAiB,CAAEC,QAAQ,IAE1B3E,EAAS1N,KAAI,SAAAsS,GAEV,EAAKhS,MAAMqN,QAAY2E,EAAI3E,QAI7B,OACE,4BAAQ9D,IAAKyI,EAAI3E,QAASvJ,MAAOkO,EAAI3E,SAClC2E,EAAIC,eAOjB,kBAACnB,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GACb,kBAAC,IAAD,CACEiB,MAAOC,IACPxG,OA9DH,KA+DGD,OAAQA,KAER,kBAAC0G,EAAA,EAAD,CACEtO,MAAOiJ,EACPyE,MAAM,YACNhR,OAAO,cACP4J,SAAU/G,KAAK2K,gBAIrB,kBAAC8C,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GACb,kBAAC,IAAD,CAAyBiB,MAAOC,KAC9B,kBAACC,EAAA,EAAD,CACEtO,MAAOoJ,EACPsE,MAAM,WACNhR,OAAO,cACP4J,SAAU/G,KAAK4K,cAIrB,kBAAC6C,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GACb,kBAACoB,EAAA,EAAD,CACEC,cAAY,OACZxH,QAASzH,KAAK8K,iBAEd,kBAAC,IAAD,QAIJ,kBAAC2C,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GACb,kBAACoB,EAAA,EAAD,CACEC,cAAY,SACZxH,QAASzH,KAAKiL,kBAEd,kBAAC,KAAD,QAIJ,kBAACwC,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GACZ5N,KAAKrD,MAAMuN,QAAQzK,OAAS,GAC3B,kBAAC8I,GAAD,CACE2G,QACE,kBAACF,EAAA,EAAD,CAAYC,cAAY,SACtB,kBAAC,IAAD,OAGJE,SACE,UAAYnF,EAAU,IAAMN,EAAY,IAAMG,GAGhD,kBAACpB,GAAD,CAAY7L,KAAMoD,KAAKrD,MAAMuN,QAAS3H,KAAK,OACzC,kBAACmG,GAAD,CAAayF,MAAM,SAAS1N,MAAM,WAClC,kBAACiI,GAAD,CAAayF,MAAM,aAAa1N,MAAM,eACtC,kBAACiI,GAAD,CAAayF,MAAM,WAAW1N,MAAM,aACpC,kBAACiI,GAAD,CAAayF,MAAM,UAAU1N,MAAM,iBACnC,kBAACiI,GAAD,CAAayF,MAAM,kBAAkB1N,MAAM,oBAC3C,kBAACiI,GAAD,CAAayF,MAAM,kBAAkB1N,MAAM,SAC3C,kBAACiI,GAAD,CACEyF,MAAM,gBACN1N,MAAM,+BAER,kBAACiI,GAAD,CAAayF,MAAM,sBAAsB1N,MAAM,kBAC/C,kBAACiI,GAAD,CACEyF,MAAM,cACN1N,MAAM,gBAER,kBAACiI,GAAD,CAAayF,MAAM,UAAU1N,MAAM,YACnC,kBAACiI,GAAD,CAAayF,MAAM,YAAY1N,MAAM,cACrC,kBAACiI,GAAD,CAAayF,MAAM,aAAa1N,MAAM,eACtC,kBAACiI,GAAD,CAAayF,MAAM,KAAK1N,MAAM,iBAC9B,kBAACiI,GAAD,CAAayF,MAAM,QAAQ1N,MAAM,iBACjC,kBAACiI,GAAD,CACEyF,MAAM,kBACN1N,MAAM,0BAUtB,kBAAC2O,EAAA,EAAD,CAAM3O,MAAOA,EAAOsG,SAAU/G,KAAKyK,aAAc4E,UAAQ,GACvD,kBAACC,EAAA,EAAD,CACExQ,KACE,kBAACyQ,EAAA,EAAD,CAAS/M,MAAM,QACb,kBAAC,IAAD,SAIN,kBAAC8M,EAAA,EAAD,CACExQ,KACE,kBAACyQ,EAAA,EAAD,CAAS/M,MAAM,SACb,kBAAC,IAAD,OAGJgN,aAAW,UAEb,kBAACF,EAAA,EAAD,CACExQ,KACE,kBAACyQ,EAAA,EAAD,CAAS/M,MAAM,WACb,kBAAC,IAAD,UAMG,IAAV/B,GACC,kBAAC8I,GAAD,KACE,kBAAC,EAAD,CAAS3M,KAAMoD,KAAKrD,MAAM6N,gBAGnB,IAAV/J,GACC,kBAAC8I,GAAD,KACE,kBAAC,GAAD,CAAU3M,KAAMoD,KAAKrD,MAAM6N,aAAcxI,WAAYhC,KAAKkL,6BAGnD,IAAVzK,GACC,kBAAC8I,GAAD,KACE,kBAACkG,GAAD,CAAW7S,KAAMoD,KAAKrD,MAAM6N,uB,GA9Y1BjK,aAyZHmP,gBA3gBA,SAAAjM,GAAK,MAAK,CACvBkM,KAAM,CACJC,SAAU,GAEZlC,UAAW,CACTmC,QAAS,OACTC,SAAU,QAEZzB,UAAW,CACT0B,WAAYtM,EAAMuM,QAAQ,GAC1BC,YAAaxM,EAAMuM,QAAQ,GAC3BzT,MAAO,KAETmL,MAAO,CACLwI,UAAW,IAEbC,KAAM,CACJ5T,MAAO,KAET6T,SAAU,CACRC,OAA2B,EAAnB5M,EAAMuM,QAAQ,IAExBvL,OAAQ,CACNC,YAAajB,EAAMuM,QAAQ,OAofhBN,CAAmBjG,IC5jB9B6G,GAASC,MACTC,GAAUC,YAAcH,IAWbI,GATF,kBACX,kBAAC,IAAD,CAAkBF,QAASA,IACzB,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAKG,KAAK,MACV,kBAAC,GAAD,CAAKA,KAAK,eCAIC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCXNC,IAASC,OAAO,kBAAC,GAAD,MAAUC,SAASC,eAAe,SD0H5C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.f9a83220.chunk.js","sourcesContent":["import React from \"react\";\r\nimport L from \"leaflet\";\r\n//import axios from \"axios\";\r\n\r\nconst style = {\r\n  width: \"100%\",\r\n  height: \"600px\"\r\n};\r\n\r\nvar geojsonLayer;\r\nvar map;\r\n\r\nclass MapData extends React.Component {\r\n  constructor(props) {\r\n    super(props); // console.log(props.data);\r\n    this.state = {\r\n      data: {}\r\n    };\r\n  }\r\n\r\n  renderMap() {\r\n    var myAttributionText =\r\n      '&copy; <a target=\"_blank\" href=\"https://download.kortforsyningen.dk/content/vilk%C3%A5r-og-betingelser\">Styrelsen for Dataforsyning og Effektivisering</a>';\r\n    var kftoken = \"d12107f70a3ee93153f313c7c502169a\";\r\n    var toposkaermkortwmts = L.tileLayer.wms(\r\n      \"https://services.kortforsyningen.dk/topo_skaermkort\",\r\n      {\r\n        layers: \"dtk_skaermkort_daempet\",\r\n        token: kftoken,\r\n        format: \"image/png\",\r\n        attribution: myAttributionText\r\n      }\r\n    );\r\n    map = L.map(\"map\", {\r\n      center: [55.2, 12.2],\r\n      zoom: 8,\r\n      layers: [\r\n        // L.tileLayer(\r\n        //   \"https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}\",\r\n        //   {\r\n        //     attribution:\r\n        //       'Map data &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"http://mapbox.com\">Mapbox</a>',\r\n        //     maxZoom: 14,\r\n        //     id: \"baffioso.ie1ok8lg\",\r\n        //     accessToken:\r\n        //       \"pk.eyJ1IjoiYmFmZmlvc28iLCJhIjoiT1JTS1lIMCJ9.f5ubY91Bi42yPnTrgiq-Gw\"\r\n        //   }\r\n        // )\r\n        toposkaermkortwmts\r\n      ]\r\n    });\r\n\r\n    var legend = L.control({ position: \"bottomleft\" });\r\n    legend.onAdd = function(map) {\r\n      var div = L.DomUtil.create(\"div\", \"legend\");\r\n      div.innerHTML += \"<h4>Signaturforklaring</h4>\";\r\n      div.innerHTML +=\r\n        '<i style=\"background:#0020d7\"></i><span>NyStartet</span><br>';\r\n      div.innerHTML +=\r\n        '<i style=\"background:#d79700\"></i><span>Fraflyttet</span><br>';\r\n      div.innerHTML +=\r\n        '<i style=\"background:#298b30\"></i><span>Tilflyttet</span><br>';\r\n      div.innerHTML +=\r\n        '<i style=\"background:#c10a0a\"></i><span>Ophørt</span><br>';\r\n      return div;\r\n    };\r\n    legend.addTo(map);\r\n\r\n    L.control.scale().addTo(map);\r\n  }\r\n  renderFeatures(data) {\r\n    //console.log('renderfeatures'); console.log(data);\r\n    var costumIcon = function(status) {\r\n      function selector(status) {\r\n        switch (status) {\r\n          case \"Tilflytter\":\r\n            return \"img/t.png\";\r\n          case \"Fraflytter\":\r\n            return \"img/f.png\";\r\n          case \"Nystartet\":\r\n            return \"img/n.png\";\r\n          case \"Ophørt\":\r\n            return \"img/o.png\";\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n      return L.icon({\r\n        iconUrl: selector(status),\r\n        shadowUrl: \"img/shadow.png\",\r\n        iconAnchor: [16, 37],\r\n        shadowAnchor: [20, 35],\r\n        popupAnchor: [0, -30]\r\n      });\r\n    };\r\n\r\n    if (geojsonLayer !== undefined) {\r\n      map.removeLayer(geojsonLayer);\r\n    }\r\n\r\n    function getCenterPoint(data) {\r\n      let features = data.filter(feature =>\r\n        [\"Nystartet\", \"\"].includes(feature.properties.status)\r\n      );\r\n      if (features.length === 0) return null;\r\n      return features[0].geometry.coordinates;\r\n    }\r\n    function onEachFeature(feature, layer) {\r\n      layer.bindPopup(\r\n        \"<strong>\" +\r\n          feature.properties.status +\r\n          \"</strong></br><hr>\" +\r\n          feature.properties.navn +\r\n          '</br><a href=\"https://datacvr.virk.dk/data/visenhed?enhedstype=produktionsenhed&id=' +\r\n          feature.properties[\"p-nummer\"] +\r\n          '\" target=\"_blank\">Se mere her</a>'\r\n      );\r\n    }\r\n\r\n    geojsonLayer = L.geoJSON(data, {\r\n      onEachFeature: onEachFeature,\r\n      pointToLayer: function(feature, latlng) {\r\n        //return L.circleMarker(latlng, geojsonMarkerOptions);\r\n        return L.marker(latlng, {\r\n          icon: costumIcon(feature.properties.status)\r\n        });\r\n      }\r\n    }).addTo(map);\r\n\r\n    let centerCoords = getCenterPoint(data);\r\n    if (centerCoords) map.setView([centerCoords[1], centerCoords[0]], 12);\r\n    else map.fitBounds(geojsonLayer.getBounds());\r\n  }\r\n  componentDidMount() {\r\n    this.renderMap();\r\n    if (this.props.data.length > 0) {\r\n      this.renderFeatures(this.props.data);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    console.log(\"componentdidupdate\");\r\n    //const { data } = this.props;\r\n    //this.renderFeatures(data);\r\n    if (this.props.data.length > 0) {\r\n      this.renderFeatures(this.props.data);\r\n    } else {\r\n      console.log(\"props empty\");\r\n    }\r\n  }\r\n\r\n  renderMarkers(data) {\r\n    //select marker depending on status\r\n    //let mymap = this.map;\r\n    var costumIcon = function(status) {\r\n      function selector(status) {\r\n        switch (status) {\r\n          case \"Tilflytter\":\r\n            return \"img/t.png\";\r\n          case \"Fraflytter\":\r\n            return \"img/f.png\";\r\n          case \"Nystartet\":\r\n            return \"img/n.png\";\r\n          case \"Ophørt\":\r\n            return \"img/o.png\";\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n      return L.icon({\r\n        iconUrl: selector(status),\r\n        shadowUrl: \"img/shadow.png\",\r\n        iconAnchor: [16, 37],\r\n        shadowAnchor: [20, 35],\r\n        popupAnchor: [0, -30]\r\n      });\r\n    };\r\n    //check if there is markers on the map and remove\r\n    if (geojsonLayer !== undefined) {\r\n      map.removeLayer(geojsonLayer);\r\n    }\r\n\r\n    function onEachFeature(feature, layer) {\r\n      //console.log(layer);\r\n      layer.bindPopup(\r\n        \"<strong>\" +\r\n          feature.properties.status +\r\n          \"</strong></br><hr>\" +\r\n          feature.properties.navn +\r\n          '</br><a href=\"https://datacvr.virk.dk/data/visenhed?enhedstype=produktionsenhed&id=' +\r\n          feature.properties[\"p-nummer\"] +\r\n          '\" target=\"_blank\">Se mere her</a>'\r\n      );\r\n    }\r\n\r\n    geojsonLayer = L.geoJSON(data, {\r\n      onEachFeature: onEachFeature,\r\n      pointToLayer: function(feature, latlng) {\r\n        return L.marker(latlng, {\r\n          icon: costumIcon(feature.properties.status)\r\n        });\r\n      }\r\n    }).addTo(map);\r\n\r\n    // console.log(geojsonLayer.getBounds());\r\n    // map.fitBounds(geojsonLayer.getBounds());\r\n  }\r\n\r\n  render() {\r\n    return <div id=\"map\" style={style}></div>;\r\n  }\r\n}\r\n\r\nexport default MapData;\r\n","import React from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  Template,\r\n  TemplatePlaceholder,\r\n  TemplateConnector,\r\n} from \"@devexpress/dx-react-core\";\r\n\r\nimport {\r\n  SortingState,\r\n  IntegratedSorting,\r\n  FilteringState,\r\n  IntegratedFiltering,\r\n  DataTypeProvider\r\n} from \"@devexpress/dx-react-grid\";\r\n\r\nimport {\r\n  Grid,\r\n  VirtualTable,\r\n  TableHeaderRow,\r\n  TableFilterRow,\r\n  TableColumnResizing\r\n} from \"@devexpress/dx-react-grid-material-ui\";\r\n\r\nconst getColor = status => {\r\n  if (status === \"Fraflytter\") return \"orange\";\r\n  else if (status === \"Tilflytter\") return \"green\";\r\n  else if (status === \"Nystartet\") return \"blue\";\r\n  else if (status === \"Ophørt\") return \"red\";\r\n  else return \"blue\";\r\n};\r\n\r\nconst StatusFormatter = ({ value }) => {\r\n  let color = getColor(value);\r\n  return <b style={{ color: color }}>{value}</b>;\r\n};\r\n\r\nconst StatusTypeProvider = props => (\r\n  <DataTypeProvider formatterComponent={StatusFormatter} {...props} />\r\n);\r\n\r\nconst PnummerFormatter = ({ value }) => {\r\n  let link = `https://datacvr.virk.dk/data/visenhed?enhedstype=produktionsenhed&id=${value}`;\r\n  return (\r\n    <a href={link} target=\"_blank\" rel=\"noopener noreferrer\">\r\n      {value}\r\n    </a>\r\n  );\r\n};\r\n\r\nconst PnummerProvider = props => (\r\n  <DataTypeProvider formatterComponent={PnummerFormatter} {...props} />\r\n);\r\n\r\n\r\nconst getRowId = row => {\r\n  return row[\"keyIndex\"];\r\n};\r\n\r\nconst getVirkForm = form =>{\r\n  switch(form){\r\n    case 10 : return \"Enkeltmandsvirksomhed\";\r\n    case 15 : return \"Personligt ejet Mindre Virksomhed\";\r\n    case 20 : return \"Dødsbo\";\r\n    case 30 : return \"Interessentskab\";\r\n    case 40 : return \"Kommanditselskab\";\r\n    case 45 : return \"Medarbejderinvesteringsselskab\";\r\n    case 50 : return \"Partrederi\";\r\n    case 60 : return \"Aktieselskab\";\r\n    case 70 : return \"Kommanditaktieselskab/Partnerskab\";\r\n    case 80 : return \"Anpartsselskab\";\r\n    case 81 : return \"Iværksætterselskab\";\r\n    case 90 : return \"Fond\";\r\n    case 100 : return \"Erhvervsdrivende fond\";\r\n    case 110 : return \"Forening\";\r\n    case 115 : return \"Frivillig forening\";\r\n    case 130 : return \"Andelselskab(-forening)\";\r\n    case 140 : return \"Andelselskab(-forening) med begrænset ansvar\";\r\n    case 150 : return \"Forening eller selskab med begrænset ansvar\";\r\n    case 151 : return \"Selskab med begrænset ansvar\";\r\n    case 152 : return \"Forening med begrænset ansvar\";\r\n    case 160 : return \"Europæisk Økonomisk Firmagruppe\";\r\n    case 170 : return \"Filial af udenlandsk aktieselskab, kommanditakties\";\r\n    case 180 : return \"Filial af udenlandsk anpartselskab eller selskab\";\r\n    case 190 : return \"Filial af udenlandsk virksomhed med begrænset ansv\";\r\n    case 195 : return \"SCE-selskab\";\r\n    case 196 : return \"Filial af SCE-selskab\";\r\n    case 200 : return \"Filial af anden udenlandsk virksomhed\";\r\n    case 210 : return \"Anden udenlandsk virksomhed\";\r\n    case 220 : return \"Fast forretningssted af Europæisk økonomisk Firmag\";\r\n    case 230 : return \"Offentlige arbejdsplads\";\r\n    case 235 : return \"Offentlige arbejdsplads\";\r\n    case 245 : return \"Offentlige arbejdsplads\";\r\n    case 250 : return \"Offentlige arbejdsplads\";\r\n    case 260 : return \"Folkekirkelige institutioner\";\r\n    case 270 : return \"Enhed under oprettelse i Erhvervs- og Selskabsstyr\";\r\n    case 280 : return \"Øvrige virksomhedsformer\";\r\n    case 285 : return \"Særlig finansiel virksomhedsform\";\r\n    case 290 : return \"SE-selskab\";\r\n    case 291 : return \"Filial af SE-selskab\";\r\n    case 990 : return \"Uoplyst virksomhedsform\";\r\n    default : return form;\r\n  }\r\n}\r\n\r\nclass GridData extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      rows: [],\r\n      data: [],\r\n      sorting: [{ columnName: \"hovedbranche\", direction: \"desc\" }],\r\n      statusColumns: [\"status\"],\r\n      pcols: [\"p-nummer\"],\r\n      grouping: [{ columnName: \"status\" }]\r\n    };\r\n    this.changeSorting = sorting => this.setState({ sorting });\r\n    this.changeGrouping = grouping => this.setState({ grouping });\r\n  }\r\n\r\n  componentDidMount() {}\r\n\r\n  componentDidUpdate() {}\r\n\r\n  render() {\r\n    const updateData = this.props.updateData;\r\n    const cols = [\r\n      { name: \"status\", title: \"Status\" },\r\n      { name: \"cvr-nummer\", title: \"CVR nummer\" },\r\n      { name: \"p-nummer\", title: \"P nummer\" },\r\n      { name: \"hovedbranche\", title: \"Branche\" },\r\n      { name: \"virksomhedsform\", title: \"virksomhedsform\" },\r\n      { name: \"navn\", title: \"Virksomhedsnavn\" },\r\n      { name: \"fuldt ansvarlige deltagere\", title: \"Kontaktperson\" },\r\n      { name: \"kvartalbes_interval\", title: \"Antal ansatte\" },\r\n      { name: \"kommunekode\", title: \"Kommunekode\" },\r\n      { name: \"vejnavn\", title: \"Vejnavn\" },\r\n      { name: \"husnummer\", title: \"Husnummer\" },\r\n      { name: \"postnummer\", title: \"Postnummer\" },\r\n      { name: \"postdistrikt\", title: \"By\" },\r\n      { name: \"emailadresse\", title: \"Email\" },\r\n      { name: \"indlæst dato\", title: \"Indlæst dato\" }\r\n    ];\r\n\r\n    const defaultColumnWidths = [\r\n      { columnName: \"status\", width: 100 },\r\n      { columnName: \"cvr-nummer\", width: 100 },\r\n      { columnName: \"p-nummer\", width: 100 },\r\n      { columnName: \"hovedbranche\", width: 150 },\r\n      { columnName: \"virksomhedsform\", width: 150 },\r\n      { columnName: \"navn\", width: 150 },\r\n      { columnName: \"fuldt ansvarlige deltagere\", width: 120 },\r\n      { columnName: \"kvartalbes_interval\", width: 120 },\r\n      { columnName: \"kommunekode\", width: 120 },\r\n      { columnName: \"vejnavn\", width: 120 },\r\n      { columnName: \"husnummer\", width: 120 },\r\n      { columnName: \"postnummer\", width: 120 },\r\n      { columnName: \"postdistrikt\", width: 120 },\r\n      { columnName: \"emailadresse\", width: 120 },\r\n      { columnName: \"indlæst dato\", width: 120 }\r\n    ];\r\n\r\n    const { statusColumns } = this.state;\r\n    const pc = this.state.pcols;\r\n    const rows = this.props.data.map((feature, index) => {\r\n      feature.properties[\"keyIndex\"] = index;\r\n      let s = feature.properties['fuldt ansvarlige deltagere'];\r\n      if(s !== null && s.length > 0)\r\n        feature.properties['fuldt ansvarlige deltagere'] = s.replace(/\\\"/g,'');\r\n      if(s === \"NULL\")\r\n        feature.properties['fuldt ansvarlige deltagere'] = \"\";\r\n      // let form = feature.properties.virksomhedsform;\r\n      // feature.properties.virksomhedsform = getVirkForm(form);\r\n      // if (\r\n      //   [230, 235, 245, 250].includes(form)\r\n      // ) {\r\n      //   feature.properties.virksomhedsform = \"Offentlige arbejdspladser\";\r\n        \r\n      // }\r\n      // if(form === 81) feature.properties.virksomhedsform = \"IVS\";\r\n      return feature.properties;\r\n    });\r\n\r\n    // console.log(rows);\r\n    return (\r\n      <Paper\r\n        style={{\r\n          height: \"600px\"\r\n        }}\r\n      >\r\n        <Grid\r\n          rows={rows}\r\n          columns={cols}\r\n          getRowId={getRowId}\r\n          style={{\r\n            height: \"100%\"\r\n          }}\r\n        >\r\n          <FilteringState defaultFilters={[]} />\r\n          <IntegratedFiltering />\r\n          <SortingState\r\n            defaultSorting={[{ columnName: \"status\", direction: \"desc\" }]}\r\n          />\r\n          <IntegratedSorting />\r\n          <StatusTypeProvider for={statusColumns} />\r\n          <PnummerProvider for={pc} />\r\n          <VirtualTable height={600} />\r\n          <TableColumnResizing defaultColumnWidths={defaultColumnWidths} />\r\n          <TableHeaderRow showSortingControls />\r\n          <TableFilterRow />\r\n          <Template name=\"root\">  \r\n            <TemplateConnector>  \r\n              {({ rows: filteredRows }) => { \r\n                console.log(\"filteredRows\"); \r\n                console.log(filteredRows);\r\n                updateData(filteredRows);  \r\n                return <TemplatePlaceholder />;  \r\n              }}  \r\n            </TemplateConnector>  \r\n          </Template>\r\n        </Grid>\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n/*\r\n\r\n                <FilteringState defaultFilters={[]} />\r\n                <IntegratedFiltering />\r\n                <SortingState defaultSorting={[{ columnName: 'status', direction: 'desc' }]} />\r\n                <IntegratedSorting />\r\n                <StatusTypeProvider \r\n                    for={statusColumns}\r\n                />\r\n                <VirtualTable\r\n                    height=\"auto\"\r\n                />\r\n                <TableColumnResizing defaultColumnWidths={defaultColumnWidths} />\r\n                <TableHeaderRow showSortingControls />\r\n                <TableFilterRow />\r\n\r\n*/\r\nexport default GridData;\r\n","import React from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { VictoryBar, VictoryChart, Bar, VictoryTheme } from \"victory\";\r\n\r\nconst getSummaryData = dat => {\r\n  let data = dat.map(feature => feature.properties);\r\n  let tilfl = data.filter(x => {\r\n    return x.status === \"Tilflytter\";\r\n  }).length;\r\n  let frafl = data.filter(x => x.status === \"Fraflytter\").length;\r\n  let oph = data.filter(x => x.status === \"Ophørt\").length;\r\n  let ny = data.filter(x => x.status === \"Nystartet\").length;\r\n  return [\r\n    { x: \"Fraflytter\", y: frafl },\r\n    { x: \"Tilflytter\", y: tilfl },\r\n    { x: \"Ophørt\", y: oph },\r\n    { x: \"Nystartet\", y: ny }\r\n  ];\r\n};\r\n\r\n// const getSummaryPerCategory = data => {\r\n//   let _data = data.map(feature => feature.properties);\r\n//   let stats = {\r\n//     fraflytter: {},\r\n//     tilflytter: {},\r\n//     ophoert: {},\r\n//     nystartet: {}\r\n//   };\r\n//   let summary = {\r\n//     fraflytter: _data.filter(x => x.status === \"Fraflytter\"),\r\n//     tilflytter: _data.filter(x => x.status === \"Tilflytter\"),\r\n//     ophoert: _data.filter(x => x.status === \"Ophørt\"),\r\n//     nystartet: _data.filter(x => x.status === \"Nystartet\")\r\n//   };\r\n//   for (let key in summary) {\r\n//     let elem = summary[key];\r\n//     elem.forEach(category => {\r\n//       // console.log('category name =>', category);\r\n//       let k = category.hovedbranche;\r\n//       if (k in stats[key]) {\r\n//         stats[key][k] = stats[key][k] + 1;\r\n//       } else {\r\n//         stats[key][k] = 1;\r\n//       }\r\n//     });\r\n//   }\r\n//   return stats;\r\n// };\r\n/*\r\nconst getBrancheData = data => {\r\n  let _data = data.map(feature => feature.properties);\r\n  let stats = {};\r\n  _data.forEach(element => {\r\n    let key = element.hovedbranche;\r\n    if (key in stats) {\r\n      stats[key] = stats[key] + 1;\r\n    } else {\r\n      stats[key] = 0;\r\n    }\r\n  });\r\n  return stats;\r\n};\r\n*/\r\nclass GraphData extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      clicked: false,\r\n      style: {\r\n        data: { fill: \"tomato\" }\r\n      }\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const handleMouseOver = () => {\r\n      const fillColor = this.state.clicked ? \"blue\" : \"tomato\";\r\n      const clicked = !this.state.clicked;\r\n      this.setState({\r\n        clicked,\r\n        style: {\r\n          data: { fill: fillColor }\r\n        }\r\n      });\r\n    };\r\n\r\n    let catData = getSummaryData(this.props.data);\r\n    //let sumData = getSummaryPerCategory(this.props.data);\r\n\r\n    return (\r\n      <div>\r\n        <Paper style={{ height: \"auto\" }}>\r\n          <VictoryChart\r\n            height={200}\r\n            width={300}\r\n            // domainPadding={{ x: 50, y: [0, 20] }}\r\n            theme={VictoryTheme.material}\r\n            domainPadding={6}\r\n            // scale={{ x: \"time\" }}\r\n          >\r\n            <VictoryBar\r\n              // barRatio={0.4}\r\n              barWidth={8}\r\n              dataComponent={<Bar events={{ onMouseOver: handleMouseOver }} />}\r\n              style={{\r\n                data: {\r\n                  fill: d => {\r\n                    //console.log(\"inside fill \", d);\r\n                    if (d.datum.x === \"Fraflytter\") return \"orange\";\r\n                    if (d.datum.x === \"Tilflytter\") return \"green\";\r\n                    if (d.datum.x === \"Ophørt\") return \"red\";\r\n                    if (d.datum.x === \"Nystartet\") return \"blue\";\r\n                  }\r\n                }\r\n              }}\r\n              data={catData}\r\n              labels={d => d.datum.y}\r\n            />\r\n          </VictoryChart>\r\n        </Paper>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GraphData;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\r\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nconst useStyles = makeStyles({\r\n  list: {\r\n    width: 450\r\n  },\r\n  fullList: {\r\n    width: \"auto\"\r\n  },\r\n  nested: {\r\n    paddingLeft: 30\r\n  }\r\n});\r\n\r\nexport default function TemporaryDrawer(props) {\r\n  const classes = useStyles();\r\n\r\n  const handleDrawer = props.handleDrawer;\r\n  const filterCols = props.filterCols;\r\n  const handleCheckedFilters = props.handleCheckedFilters;\r\n  const reset = props.reset;\r\n  const doFilter = props.doFilter;\r\n  const filterWords = props.filterWords;\r\n\r\n  const [opened, setOpened] = React.useState({\r\n    status: false,\r\n    postdistrikt: false,\r\n    postnummer: false\r\n  });\r\n\r\n  \r\n  const handleClick = text => { \r\n    setOpened({\r\n      ...opened,\r\n      [text]: !opened[text]\r\n    });\r\n  };\r\n  \r\n\r\n  const _list = (cols,key) => {\r\n    return cols[key].map((col, index) => (\r\n      <ListItem key={key + \"_\" + index} button className={classes.nested}>\r\n        <ListItemText primary={Object.keys(col)[0]} />\r\n        <ListItemSecondaryAction>\r\n          <Checkbox\r\n            checked={Object.values(col)[0]}\r\n            onChange={(e) => handleCheckedFilters(key + \"_\" + Object.keys(col)[0], e)}\r\n            edge=\"end\"\r\n          />\r\n        </ListItemSecondaryAction>\r\n      </ListItem>\r\n    ));\r\n  }\r\n  const sideList = (categories, cols) => {\r\n    let comps = {};\r\n    categories.forEach(categorie => {\r\n      if (cols[categorie]) {\r\n        comps[categorie] = _list(cols,categorie);\r\n      }  \r\n    });\r\n    \r\n    return (\r\n      <div className={classes.list} role=\"presentation\">\r\n        <List>\r\n        <ListItem>\r\n            <ListItemIcon>\r\n              <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={doFilter}>\r\n                Filtrere\r\n              </Button>\r\n            </ListItemIcon>\r\n            <ListItemSecondaryAction>\r\n              <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={reset}>\r\n                Reset\r\n              </Button>\r\n            </ListItemSecondaryAction>\r\n          </ListItem>\r\n        </List>\r\n        <List dense>\r\n          {categories.map((text, index) => (\r\n            <React.Fragment key={\"cat_\"+index}>\r\n              <ListItem button key={text} onClick={() => handleClick(text)}>\r\n                <ListItemText primary={text} />\r\n                {opened[text] ? <ExpandLess /> : <ExpandMore />}\r\n              </ListItem>\r\n              <Collapse in={opened[text]} timeout=\"auto\" unmountOnExit>\r\n                <List component=\"div\" disablePadding dense>\r\n                  {comps[text]}\r\n                </List>\r\n              </Collapse>\r\n            </React.Fragment>\r\n          ))}\r\n        </List>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* <Button onClick={toggleDrawer('right', true)}>Open Right</Button> */}\r\n      <Drawer anchor=\"right\" open={props.drawerOpen} onClose={handleDrawer}>\r\n        {sideList(filterWords, filterCols)}\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\r\n\r\nimport moment from \"moment\";\r\nimport \"moment/locale/da\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport CloudDownload from \"@material-ui/icons/CloudDownload\";\r\nimport Map from \"@material-ui/icons/Map\";\r\nimport TableChart from \"@material-ui/icons/TableChart\";\r\nimport BarChart from \"@material-ui/icons/BarChart\";\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport { DatePicker } from \"@material-ui/pickers\";\r\nimport MapData from \"./Map.js\";\r\nimport GridData from \"./Grid.js\";\r\nimport GraphData from \"./Graph.js\";\r\n\r\nimport \"./App.css\";\r\nimport classnames from \"classnames\";\r\nimport ReactExport from \"react-data-export\";\r\nimport jQuery from \"jquery\";\r\nimport { navigate } from \"@reach/router\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport TemporaryDrawer from \"./Drawer\";\r\n\r\nmoment.locale(\"da\");\r\n\r\n/*\r\nTODO:\r\n1. use the filtered list to update the data -- done\r\n2. add reset btn to the list -- done\r\n3. Filteredrows to update csv_data. now excel is up to date -- done\r\n3. Finish the table component to the extra requested columns -- need to be done\r\n4. Fix map renderfeatures when data is empty\r\n5. make list to filter generic, not hard coded\r\n*/\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\nconst filterWords = [\"status\", \"virksomhedsform\", \"hovedbranche\"];\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1\r\n  },\r\n  container: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\"\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    width: 200\r\n  },\r\n  dense: {\r\n    marginTop: 19\r\n  },\r\n  menu: {\r\n    width: 300\r\n  },\r\n  progress: {\r\n    margin: theme.spacing(1) * 2\r\n  },\r\n  nested: {\r\n    paddingLeft: theme.spacing(4)\r\n  }\r\n});\r\n\r\nconst theme = createMuiTheme({\r\n  typography: {\r\n    useNextVariants: true,\r\n    suppressDeprecationWarnings: true\r\n  }\r\n});\r\n\r\n//TODO: complete the select  comp!!!\r\nfunction uniqueValues(colValues) {\r\n  let vals = [...new Set(colValues)];\r\n  // console.log(vals);\r\n  return vals;\r\n}\r\n\r\nconst getVirkForm = form =>{\r\n  switch(form){\r\n    case 10 : return \"Enkeltmandsvirksomhed\";\r\n    case 15 : return \"Personligt ejet Mindre Virksomhed\";\r\n    case 20 : return \"Dødsbo\";\r\n    case 30 : return \"Interessentskab\";\r\n    case 40 : return \"Kommanditselskab\";\r\n    case 45 : return \"Medarbejderinvesteringsselskab\";\r\n    case 50 : return \"Partrederi\";\r\n    case 60 : return \"Aktieselskab\";\r\n    case 70 : return \"Kommanditaktieselskab/Partnerskab\";\r\n    case 80 : return \"Anpartsselskab\";\r\n    case 81 : return \"Iværksætterselskab\";\r\n    case 90 : return \"Fond\";\r\n    case 100 : return \"Erhvervsdrivende fond\";\r\n    case 110 : return \"Forening\";\r\n    case 115 : return \"Frivillig forening\";\r\n    case 130 : return \"Andelselskab(-forening)\";\r\n    case 140 : return \"Andelselskab(-forening) med begrænset ansvar\";\r\n    case 150 : return \"Forening eller selskab med begrænset ansvar\";\r\n    case 151 : return \"Selskab med begrænset ansvar\";\r\n    case 152 : return \"Forening med begrænset ansvar\";\r\n    case 160 : return \"Europæisk Økonomisk Firmagruppe\";\r\n    case 170 : return \"Filial af udenlandsk aktieselskab, kommanditakties\";\r\n    case 180 : return \"Filial af udenlandsk anpartselskab eller selskab\";\r\n    case 190 : return \"Filial af udenlandsk virksomhed med begrænset ansv\";\r\n    case 195 : return \"SCE-selskab\";\r\n    case 196 : return \"Filial af SCE-selskab\";\r\n    case 200 : return \"Filial af anden udenlandsk virksomhed\";\r\n    case 210 : return \"Anden udenlandsk virksomhed\";\r\n    case 220 : return \"Fast forretningssted af Europæisk økonomisk Firmag\";\r\n    case 230 : return \"Offentlige arbejdsplads\";\r\n    case 235 : return \"Offentlige arbejdsplads\";\r\n    case 245 : return \"Offentlige arbejdsplads\";\r\n    case 250 : return \"Offentlige arbejdsplads\";\r\n    case 260 : return \"Folkekirkelige institutioner\";\r\n    case 270 : return \"Enhed under oprettelse i Erhvervs- og Selskabsstyr\";\r\n    case 280 : return \"Øvrige virksomhedsformer\";\r\n    case 285 : return \"Særlig finansiel virksomhedsform\";\r\n    case 290 : return \"SE-selskab\";\r\n    case 291 : return \"Filial af SE-selskab\";\r\n    case 990 : return \"Uoplyst virksomhedsform\";\r\n    default : return form;\r\n  }\r\n}\r\n\r\nfunction uniqueValuesGroupedByKey(arrOfObj, keys) {\r\n  // const keys = Object.keys(arrOfObj[0]);\r\n  //console.log(keys);\r\n  let ret = {};\r\n\r\n  function uniqueElemsOfSameKey(_arrOfObj, key) {\r\n    const values = _arrOfObj.map(elem => elem[key]);\r\n    let ret  = uniqueValues(values);\r\n    ret = ret.map(elem => ({[elem] :false}));\r\n    return ret;\r\n  }\r\n\r\n  keys.forEach(key => {\r\n    ret[key] = uniqueElemsOfSameKey(arrOfObj, key);\r\n  });\r\n\r\n  return ret;\r\n}\r\n\r\nfunction TabContainer(props) {\r\n  return <div>{props.children}</div>;\r\n}\r\n\r\nTabContainer.propTypes = {\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      value: 0,\r\n      startDate: moment()\r\n        .subtract(1, \"months\")\r\n        .startOf(\"month\")\r\n        .format(\"YYYY-MM-DD\"),\r\n      endDate: moment()\r\n        .subtract(1, \"months\")\r\n        .endOf(\"month\")\r\n        .format(\"YYYY-MM-DD\"),\r\n      data: [],\r\n      kommuner: [],\r\n      komkode: this.props.komnr, //'165',\r\n     \r\n      csvData: [], // used for Excel print\r\n      loading: true,\r\n      completed: 0,\r\n      canSendRequest: false,\r\n      filterOpen: false,\r\n      drawerOpen: false,\r\n      \r\n      uniqueVals: {},\r\n      /*\r\n      This is the data which will be rendered and printed by the excel component.\r\n      All filtering will act on this array. \r\n      The reset button will reset this arrat to \r\n              dataToRender = this.state.data or this.state.csvData;\r\n      */\r\n      dataToRender: [] \r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleStart = this.handleStart.bind(this);\r\n    this.handleEnd = this.handleEnd.bind(this);\r\n    this.handleSelect = this.handleSelect.bind(this);\r\n    this.handleDoneClick = this.handleDoneClick.bind(this);\r\n    this.handleFilterOpen = this.handleFilterOpen.bind(this);\r\n    this.handleFilterClose = this.handleFilterClose.bind(this);\r\n    this.handleDrawerOpen = this.handleDrawerOpen.bind(this);\r\n    this.handleCheckedFilters = this.handleCheckedFilters.bind(this);\r\n    this.reset = this.reset.bind(this);\r\n    this.updateRenderDataFromTable = this.updateRenderDataFromTable.bind(this);\r\n    this.doFilter = this.doFilter.bind(this);\r\n  }\r\n\r\n  doFilter(){\r\n    const uniqueVals = this.state.uniqueVals;\r\n    const filteredCategories = Object.keys(uniqueVals);\r\n    // console.log(filteredCategories);\r\n    let filters = {};\r\n     filteredCategories.forEach(cat =>{\r\n      let temp = uniqueVals[cat];\r\n      // console.log(temp)\r\n      filters[cat] = temp.filter(obj => {\r\n        return Object.values(obj)[0] === true;\r\n      })\r\n     .map(elem => {\r\n        return Object.keys(elem)[0];\r\n      }); \r\n     });\r\n     const dataToRender = this.state.dataToRender;\r\n     const data = dataToRender.filter(row => {\r\n      let res = true;\r\n      filteredCategories.forEach(key =>{\r\n      //  console.log(row.properties[key]);\r\n      if(filters[key].length > 0 \r\n        && filters[key].indexOf(row.properties[key]) === -1)\r\n             res = false;\r\n      });\r\n      return res;\r\n     });\r\n     this.setState({dataToRender : data});\r\n     \r\n  }\r\n\r\n  updateRenderDataFromTable(filteredRows){\r\n    console.log('filtered rows');\r\n    this.setState({csvData: filteredRows});\r\n  }\r\n\r\n  reset(){\r\n    this.setState({\r\n      dataToRender: this.state.data, \r\n      uniqueVals: uniqueValuesGroupedByKey(\r\n        this.state.data.map(feature => feature.properties), \r\n        filterWords\r\n        )\r\n    });\r\n  }\r\n\r\n  handleCheckedFilters(text, event){ //console.log('called with => ', text)\r\n    let [group, name] = text.split(\"_\");\r\n    let checkedGroup = this.state.uniqueVals[group];\r\n    let indexToUpdate = checkedGroup.findIndex(elem => Object.keys(elem)[0] === name);\r\n    let elementToUpdate = checkedGroup[indexToUpdate];\r\n    //Toggle to false or true\r\n    elementToUpdate[name] = !elementToUpdate[name];\r\n\r\n    this.setState({uniqueVals:{\r\n      ...this.state.uniqueVals,\r\n      [group]: [\r\n        ...checkedGroup.slice(0,indexToUpdate),\r\n        elementToUpdate,\r\n        ...checkedGroup.slice(indexToUpdate+1)\r\n      ]\r\n    }});\r\n  }\r\n\r\n  handleFilterOpen() {\r\n    this.setState({ filterOpen: !this.state.filterOpen });\r\n  }\r\n\r\n  handleDrawerOpen() {\r\n    this.setState({ drawerOpen: !this.state.drawerOpen });\r\n  }\r\n\r\n  handleFilterClose() {\r\n    this.setState({ filterOpen: false });\r\n  }\r\n\r\n  getKommuner() {\r\n    let komUrl =\r\n      \"https://drayton.mapcentia.com/api/v1/sql/ballerup?q=select right(komkode, 3)::int komkode, \" +\r\n      \"komnavn from data.kommune group by komkode, komnavn order by komnavn\";\r\n    komUrl = \"kom.json\";\r\n    let that = this;\r\n    jQuery.ajax({\r\n      url: komUrl,\r\n      type: \"GET\",\r\n      dataType: \"json\",\r\n      success: function(res) {\r\n        let koms = res.features.map(feature => feature.properties);\r\n        that.setState(preveState => ({ kommuner: koms }));\r\n      }\r\n    });\r\n  }\r\n\r\n  getData(komkode, startDate, endDate) {\r\n    this.setState(preveState => ({ csvData: [], loading: true }));\r\n    let that = this;\r\n    if (!komkode) {\r\n      this.setState({ loading: false });\r\n      return;\r\n    }\r\n    let dataUrl =\r\n      \"https://drayton.mapcentia.com/api/v1/sql/ballerup?q=SELECT * FROM cvr.flyt_fad_dev(\" +\r\n      komkode +\r\n      \",'\"+ startDate +\"','\"+ endDate +\"')&srs=4326\";\r\n    //dataUrl = \"data.json\";\r\n    // console.log(dataUrl);\r\n    jQuery.ajax({\r\n      url: dataUrl,\r\n      type: \"GET\",\r\n      dataType: \"jsonp\",\r\n      success: function(res) {\r\n        //that.setState(preveState => ({ data: res.features }));\r\n        // console.log(res.features);\r\n        let csv = res.features.map(feature => feature.properties);\r\n        res.features.forEach(feature => {\r\n          let form = feature.properties.virksomhedsform;\r\n          feature.properties.virksomhedsform = getVirkForm(form);\r\n        });\r\n        that.setState(prevState => ({\r\n          csvData: csv,\r\n          data: res.features,\r\n          dataToRender: res.features,\r\n          loading: false,\r\n          uniqueVals: uniqueValuesGroupedByKey(csv,filterWords)\r\n        }));\r\n      }\r\n    });\r\n  }\r\n\r\n  handleSelect(event) {\r\n    event.persist();\r\n    this.setState(prevState => ({ komkode: event.target.value }));\r\n  }\r\n\r\n  componentDidMount() {\r\n    let { komkode, startDate, endDate } = this.state;\r\n    this.getData(komkode, startDate, endDate);\r\n    this.getKommuner();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    //clearInterval(this.timer);\r\n  }\r\n\r\n  handleChange(event, value) {\r\n    this.setState({ value });\r\n  }\r\n\r\n  handleDoneClick() {\r\n    let { komkode, startDate, endDate } = this.state;\r\n    this.getData(komkode, startDate, endDate);\r\n    navigate(\"#/\" + komkode);\r\n  }\r\n\r\n  handleStart(date) {\r\n    this.setState({\r\n      startDate: date.format(\"YYYY-MM-DD\")\r\n    });\r\n  }\r\n\r\n  handleEnd(date) {\r\n    this.setState({\r\n      endDate: date.format(\"YYYY-MM-DD\")\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { value, startDate, endDate, kommuner, komkode } = this.state;\r\n    const locale = \"da\";\r\n    return (\r\n      <MuiThemeProvider theme={theme}>\r\n        <div className=\"app\">\r\n          <div className={this.state.loading ? \"loading\" : \"\"}></div>\r\n          \r\n          <TemporaryDrawer\r\n            handleDrawer={this.handleDrawerOpen}\r\n            drawerOpen={this.state.drawerOpen}\r\n            filterCols={this.state.uniqueVals}\r\n            handleCheckedFilters={this.handleCheckedFilters}\r\n            reset={this.reset}\r\n            doFilter={this.doFilter}\r\n            filterWords={filterWords}\r\n          />\r\n          <div className=\"\">\r\n            <AppBar position=\"static\" color=\"default\">\r\n              <Toolbar>\r\n                <Grid container /*spacing={}*/>\r\n                  <Grid item xs={2}>\r\n                    <Typography variant=\"h6\" color=\"inherit\">\r\n                      CVR Flyttemønster\r\n                    </Typography>\r\n                  </Grid>\r\n                  <Grid item xs={2}>\r\n                    <form\r\n                      className={classnames.container}\r\n                      noValidate\r\n                      autoComplete=\"off\"\r\n                    >\r\n                      <TextField\r\n                        id=\"standard-select\"\r\n                        select\r\n                        label=\"Kommune\"\r\n                        placeholder=\"Placeholder\"\r\n                        className={classnames.textField}\r\n                        value={this.state.komkode || \"\"}\r\n                        onChange={this.handleSelect}\r\n                        SelectProps={{\r\n                          native: true\r\n                        }}\r\n                        helperText=\"\"\r\n                        InputLabelProps={{ shrink: true }}\r\n                      >\r\n                        {kommuner.map(kom => {\r\n                          let selected =\r\n                            this.state.komkode === kom.komkode\r\n                              ? \"selected\"\r\n                              : false;\r\n                          // if (selected) console.log(kom.komnavn);\r\n                          return (\r\n                            <option key={kom.komkode} value={kom.komkode}>\r\n                              {kom.komnavn}\r\n                            </option>\r\n                          );\r\n                        })}\r\n                      </TextField>\r\n                    </form>\r\n                  </Grid>\r\n                  <Grid item xs={2}>\r\n                    <MuiPickersUtilsProvider\r\n                      utils={MomentUtils}\r\n                      locale={locale}\r\n                      moment={moment}\r\n                    >\r\n                      <DatePicker\r\n                        value={startDate}\r\n                        label=\"Startdato\"\r\n                        format=\"DD MMM YYYY\"\r\n                        onChange={this.handleStart}\r\n                      />\r\n                    </MuiPickersUtilsProvider>\r\n                  </Grid>\r\n                  <Grid item xs={2}>\r\n                    <MuiPickersUtilsProvider utils={MomentUtils}>\r\n                      <DatePicker\r\n                        value={endDate}\r\n                        label=\"Slutdato\"\r\n                        format=\"DD MMM YYYY\"\r\n                        onChange={this.handleEnd}\r\n                      />\r\n                    </MuiPickersUtilsProvider>\r\n                  </Grid>\r\n                  <Grid item xs={2}>\r\n                    <IconButton\r\n                      arial-label=\"Done\"\r\n                      onClick={this.handleDoneClick}\r\n                    >\r\n                      <DoneIcon />\r\n                    </IconButton>\r\n                  </Grid>\r\n\r\n                  <Grid item xs={2}>\r\n                    <IconButton\r\n                      arial-label=\"Filter\"\r\n                      onClick={this.handleDrawerOpen}\r\n                    >\r\n                      <FilterListIcon />\r\n                    </IconButton>\r\n                  </Grid>\r\n\r\n                  <Grid item xs={2}>\r\n                    {this.state.csvData.length > 0 && (\r\n                      <ExcelFile\r\n                        element={\r\n                          <IconButton arial-label=\"Excel\">\r\n                            <CloudDownload />\r\n                          </IconButton>\r\n                        }\r\n                        filename={\r\n                          \"export_\" + komkode + \"_\" + startDate + \"_\" + endDate\r\n                        }\r\n                      >\r\n                        <ExcelSheet data={this.state.csvData} name=\"CVR\">\r\n                          <ExcelColumn label=\"Status\" value=\"status\" />\r\n                          <ExcelColumn label=\"CVR nummer\" value=\"cvr-nummer\" />\r\n                          <ExcelColumn label=\"P nummer\" value=\"p-nummer\" />\r\n                          <ExcelColumn label=\"Branche\" value=\"hovedbranche\" />\r\n                          <ExcelColumn label=\"virksomhedsform\" value=\"virksomhedsform\" />\r\n                          <ExcelColumn label=\"Virksomhedsnavn\" value=\"navn\" />\r\n                          <ExcelColumn\r\n                            label=\"Kontaktperson\"\r\n                            value=\"fuldt ansvarlige deltagere\"\r\n                          />\r\n                          <ExcelColumn label=\"kvartalbes_interval\" value=\"Antal ansatte\" />\r\n                          <ExcelColumn\r\n                            label=\"Kommunekode\"\r\n                            value=\"kommunekode\"\r\n                          />\r\n                          <ExcelColumn label=\"vejnavn\" value=\"vejnavn\" />\r\n                          <ExcelColumn label=\"Husnummer\" value=\"husnummer\" />\r\n                          <ExcelColumn label=\"Postnummer\" value=\"postnummer\" />\r\n                          <ExcelColumn label=\"By\" value=\"postdistrikt\" />\r\n                          <ExcelColumn label=\"Email\" value=\"emailadresse\" />\r\n                          <ExcelColumn\r\n                            label=\"Indlæst dato\"\r\n                            value=\"indlæst dato\"\r\n                          />\r\n                        </ExcelSheet>\r\n                      </ExcelFile>\r\n                    )}\r\n                  </Grid>\r\n                </Grid>\r\n              </Toolbar>\r\n            </AppBar>\r\n\r\n            <Tabs value={value} onChange={this.handleChange} centered>\r\n              <Tab\r\n                icon={\r\n                  <Tooltip title=\"Kort\">\r\n                    <Map />\r\n                  </Tooltip>\r\n                }\r\n              />\r\n              <Tab\r\n                icon={\r\n                  <Tooltip title=\"Tabel\">\r\n                    <TableChart />\r\n                  </Tooltip>\r\n                }\r\n                aria-label=\"Tabel\"\r\n              />\r\n              <Tab\r\n                icon={\r\n                  <Tooltip title=\"Grapher\">\r\n                    <BarChart />\r\n                  </Tooltip>\r\n                }\r\n              />\r\n              \r\n            </Tabs>\r\n            {value === 0 && (\r\n              <TabContainer>\r\n                <MapData data={this.state.dataToRender} />\r\n              </TabContainer>\r\n            )}\r\n            {value === 1 && (\r\n              <TabContainer>\r\n                <GridData data={this.state.dataToRender} updateData={this.updateRenderDataFromTable}/>\r\n              </TabContainer>\r\n            )}\r\n            {value === 2 && (\r\n              <TabContainer>\r\n                <GraphData data={this.state.dataToRender} />\r\n              </TabContainer>\r\n            )}\r\n          </div>\r\n        </div>\r\n   \r\n      </MuiThemeProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(App);\r\n\r\n","import React from \"react\";\r\nimport { createHistory, LocationProvider, Router } from \"@reach/router\";\r\nimport createHashSource from \"hash-source\";\r\nimport App from \"./App\";\r\n\r\nlet source = createHashSource();\r\nlet history = createHistory(source);\r\n\r\nconst Home = () => (\r\n  <LocationProvider history={history}>\r\n    <Router>\r\n      <App path=\"/\" />\r\n      <App path=\"/:komnr\" />\r\n    </Router>\r\n  </LocationProvider>\r\n);\r\n\r\nexport default Home;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\n//import App from './App';\r\nimport Home from \"./Home\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<Home />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}